{% extends 'base.html' %}

{% block header_content %}
{% endblock %}

{% block top_content %}
{% endblock %}

{% block main_content %}
<div class="row-fluid">
    <div class="hero-unit">
        <h2>Course progress: {{ (progress_total*100)|round|int }}%</h2>
        <div class="progress">
            <div class="bar" style="width: {{ progress_total*100 }}%;"></div>
        </div>
    </div>
</div>
<div class="row-fluid">
    <h2>
        {% trans %} Schedule {% endtrans %}
    </h2>
    <table class="table table-striped">
        <tbody>
            {% for unit in units %}
            {% if unit.now_available or is_course_admin %}
            <tr>
                <td >
                    {% if unit.difficulty == 1 %}
                    <span title="Easy" class="badge badge-success">Easy</span>
                    {% elif unit.difficulty == 2 %}
                    <span title="Easy" class="badge badge-warning">Intermediate</span>
                    {% elif unit.difficulty == 3%}
                    <span title="Easy" class="badge badge-important">Advanced</span>
                    {% else %}
                    <span title="None" class="badge badge-none">---</span>
                    {% endif %}
                </td>

                <td >
                    {% if unit.type == 'A' %}
                    <a href="assessment?name={{ unit.unit_id }}">{{ unit.title }}</a>
                    {% elif unit.type == 'U' %}
                    <a href="unit?unit={{ unit.unit_id }}">
                        {{ gettext('Unit %(id)s - %(title)s', id=unit.index, title=unit.title) }}
                    </a>
                    {% elif unit.type == 'O' %}
                    <a href="{{ unit.href }}"> {{ unit.title }} </a>
                    {% else %}
                    Error: unit type not recognized.
                    {% endif %}
                </td>

                <td >
                    {% if unit.type == 'A' %}
                    {% if progress[unit.unit_id] > 0 %}
                        <i class="icon-ok"></i>
                        Finished
                    {% else %}
                        <i class="icon-circle-blank"></i>
                        Not Started
                    {% endif %}
                    {% elif unit.type == 'U' %}
                    {% if is_progress_recorded %}
                    {% if progress[unit.unit_id] == 2 %}
                        <i class="icon-ok"></i>
                        Finished
                    {% elif progress[unit.unit_id] == 1 %}
                    <img src="assets/img/in_progress.png"
                        <i class="icon-adjust"></i>
                        In Progress
                    {% else %}
                        <i class="icon-circle-blank"></i>
                        Not Started
                    {% endif %}
                    {% endif %}
                    {% endif %}
                </td>

            </tr>
            {% else %}
            <tr>
                <td >
                    {% if unit.difficulty == 1 %}
                    <span title="Easy" class="badge badge-success">Basic</span>
                    {% elif unit.difficulty == 2 %}
                    <span title="Easy" class="badge badge-warning">Intermediate</span>
                    {% elif unit.difficulty == 3%}
                    <span title="Easy" class="badge badge-important">Advanced</span>
                    {% else %}
                    <span title="None" class="badge badge-none">---</span>
                    {% endif %}
                </td>

                <td >
                    {% if unit.type == 'A' %}
                        {{ unit.title }}
                    {% elif unit.type == 'U' %}
                        {{ gettext('Unit %(id)s - %(title)s', id=unit.index, title=unit.title) }}
                        <em>
                            ({{ unit.release_date }})
                        </em>
                    {% elif unit.type == 'O' %}
                        {{ unit.title }}
                        <em>
                            ({{ unit.release_date }})
                        </em>
                    {% else %}
                        Error: unit type not recognized.
                    {% endif %}
                </td>

                <td >

                </td>
            </tr>
            {% endif %}
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}